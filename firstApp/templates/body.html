{% load static %} {% include "header2.html" %}

<div class="  m-0">
    <div class=" row">


        <div class="col-3 border-right" style="min-height: 50em;">

            <div class="text-center">
                <img class="fa fa-user mt-5 mb-3 " src="https://i.ya-webdesign.com/images/teacher-clip-filipino-3.png" style="width:12em;"><br>
            </div>

            <div class="p-3">
                {% with user.all|first as user_data %}
                <h3 class="mt-3 font-weight-normal" style="font-family: 'Roboto', sans-serif;">{{ user_data.f_name }} {{ user_data.l_name }} </h3>
                <p class="" style="font-family: 'Roboto', sans-serif; color: #666;"> @{{ user_data.f_name }} </p>
                <p class="" style="font-family: 'Roboto', sans-serif; color: #666;"> <i class="fas fa-map-pin"></i> &nbsp;Chico, United States</p>
                <p class="" style="font-family: 'Roboto', sans-serif; color: #666;"> <i class="far fa-envelope"></i> {{ user_data.email }} </p>

                <input id="user_id" style="display: none;" value=" {{ user_data.email }}">
                <input id="user_name" style="display: none;" value=" {{ user_data.f_name }} {{ user_data.l_name }}">

            </div>

            <!-- <div class="text-center p-1">
                <button class="btn btn-default" style="width:100%;" disabled> Follow </button>
            </div> -->

        </div>

        <div class="col-6 ">

            <div class="container mt-5 custom-file">

                <form method="POST" class="p-2 pr-4 " enctype="multipart/form-data" style="background-color: #d5f6f2;">
                    {% csrf_token %} {% for field in form.form.hidden_fields %} {{ field }} {% endfor %} {% for field in form.form.visible_fields %} {{ field }} {% endfor %}
                    <div class="row p-0 mt-1">
                        <br><span class="col-5 p-3 ml-2 mr-4 text-default addCategory" style="cursor: pointer;"> <i class="far fa-plus-square"></i> Create Category</span>
                        <button id="submit" style="display: inline;" class="btn btn-default w-100 col-6">Post</button>
                    </div>
                </form>

                <div class="mt-4 row p-3">

                    <span class="col-3 p-1 font-weight-bold text-default">
                        <i class="fas fa-filter p-1 text-default" style="font-size: 1.5em;"></i> 
                        <span class="font-weight font-weight-normal"> Filter Category</span>
                    </span>
                    <select class="form-control col-5" style="height: 3em;" onchange="this.options[this.selectedIndex].value && (window.location = this.options[this.selectedIndex].value);">
                        <option selected disabled>Select Category</option>
                        {% for record in catList %}

                            {% if record.category|stringformat:"s" == category|stringformat:"s"%}
                            <option selected> {{record.category}} </option>
                            {% else %}
                            <option value="/home/{{record.category}}/"> {{record.category}} </option>
                            {% endif %}

                        {% endfor %}
                        
                    </select>
                    <div class="col-1"></div>
                    <a href="/chat/{{category}}" class="col-3 btn btn-default m-0">
                         Chat Room 
                    </a>

                </div>

            </div>

            <div class="post_box p-3 " id="post_box">

                {% for e in posts %}
                <div id="post{{ e.postId }}" class="box border mt-3" style="width: 100%; height: auto;">
                    <div class="row">
                        <div class="col-6 pl-4 pt-3">
                            <img src="https://i.ya-webdesign.com/images/teacher-clip-filipino-3.png" class="img-thumbnail border-0" style="display: inline; height: 3em;">
                            <span class="font-weight-normal" style="display: inline;">{{ e.user_name }}</span>
                            <!--  &middot; <p style="display: inline; font-size: .9em; color: #d3d3d3;">{{ e.category }}</p> -->

                        </div>
                        <div class="col-6 pt-4 pr-4 text-right">
                            <p class="mr-1" style="color: #d3d3d3; font-size: .7em; display: inline;"><i class="far fa-clock" style=""></i> {{ e.last_modified }}</p>
                            <!-- <p class="mr-1 deleteBtn" style="color: #d3d3d3; font-size: .7em; display: inline; cursor: pointer;" id="{{ e.postId }}"><i class="far fa-trash-alt"></i> Delete</p> -->

                            {% if e.user|stringformat:"s" == user_data.email|stringformat:"s"%}
                            <p class="mr-1 deleteBtn" style="color: #d3d3d3; font-size: .7em; display: inline; cursor: pointer;" id="{{ e.postId }}"><i class="far fa-trash-alt"></i> Delete</p>
                            {% endif %}

                        </div>
                        <div class="col-6 pl-4 pt-4">
                            <p style="display: inline; font-size: .9em; color: #000;" class="pl-1 pt-1">{{ e.post_message }}</p>

                        </div>

                    </div>

                    {% if e.image != '' %}
                    <img src="{{ e.image.url }}" style="max-width: 100%; padding: 1em; max-height: 500px;"> {% endif %} {% if e.location != '' %}

                    <iframe class="p-3" style="width: 100%; height: 15em;" id="gmap_canvas" src="https://maps.google.com/maps?q={{ e.location }}&t=&z=13&ie=UTF8&iwloc=&output=embed" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>                    {% endif %}

                    <div class="p-3">
                        <div class="row mb-3">
                            <img src="https://i.ya-webdesign.com/images/teacher-clip-filipino-3.png" class=" ml-3 img-thumbnail border-0" style="display: inline; height: 3em;">
                            <form class="col-9 w-100" id="form{{ e.postId }}">
                                <textarea id="textIn{{ e.postId }}" style="height: 2.5em; border-color: #d3d3d3; padding: .5em; width: 100%;" placeholder="Comment here.."></textarea>
                                <input type="text" style="display: none;" value="{{ e.postId }}">
                            </form>
                            <div class="col-1 cmt-post btn-default w-100" style="height: 3em; margin: 0px; margin-left: 1em;vertical-align: middle; text-align: center; padding-top: .8em; width: 100%; font-size: .8em;" id="{{ e.postId }}"> Post</div>
                        </div>
                        <div style="font-size: 1em;" id="com{{ e.postId }}">

                            {% for c in comments %} {% if c.postId|stringformat:"s" == e.postId|stringformat:"s" %}
                            <div id="cmt{{ c.commentId }}" class="row">
                                <div class="col-7" style="word-wrap: break-word;    ">
                                    <span class="text-default font-weight-bold">{{ c.user }} &centerdot; </span> {{ c.comment_message }}
                                </div>
                                <div class="col-5 text-right" style="font-size: .8em; padding: .3em;">
                                    <p id="{{ c.commentId }}" class="like mr-1" style="color: #66c2ff; font-size: .9em; display: inline;cursor: pointer;"> <i class="far fa-thumbs-up"></i>
                                        <span class="like{{ c.commentId }}">{{c.likes}}</span> </p>
                                    <p id="{{ c.commentId }}" class="dislike mr-1" style="color: #ff6666; font-size: .9em; display: inline;cursor: pointer;"> <i class="far fa-thumbs-down"></i>
                                        <span class="dislike{{ c.commentId }}">{{c.dislike}}</span> </p>

                                    <p class="mr-1" style="color: #d3d3d3; font-size: .7em; display: inline;"><i class="far fa-clock" style=""></i> {{ e.last_modified }}</p>

                                    {% if c.userId|stringformat:"s" == user_data.email|stringformat:"s" or e.user|stringformat:"s" == user_data.email|stringformat:"s"%}
                                    <p class="deleteBtnCmt mr-1" id="{{ c.commentId }}" style="color: #d3d3d3; font-size: .7em; display: inline; cursor: pointer;"><i class="far fa-trash-alt"></i> Delete</p>
                                    {% endif %}
                                </div>
                            </div>

                            {% endif %} {% endfor %}
                        </div>

                    </div>

                </div>

                {% endfor %} {% endwith %}

            </div>


        </div>


        <div class="col-3  border-left">


            <h3 class="text-center mt-5">Chat Rooms</h3>
            <h6 class="text-center" style="color: #d3d3d3;">Category Based</h6>
            <div id="chatGroup" class="mt-2 p-2 mr-4">

            </div>


        </div>






    </div>
</div>


{% include "footer.html" %}
</body>

<script src="{% static 'js/RCHome.js' %}"></script>
<link rel="stylesheet" href="{% static 'css/style.css' %}">

</html>